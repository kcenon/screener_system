# [FE-003] Stock Screener Page Implementation

## Metadata
- **Status**: TODO
- **Priority**: Critical
- **Assignee**: TBD
- **Estimated Time**: 16 hours
- **Sprint**: Sprint 2 (Week 3-4)
- **Tags**: #frontend #screener #core-feature #ui

## Description
Implement the core stock screening page with dynamic filter panel, results table, and template selection. This is the platform's primary feature.

## Subtasks
- [ ] API Service Layer
  - [ ] src/services/stockService.ts
    - [ ] screenStocks(filters, sort, pagination)
    - [ ] getScreeningTemplates()
- [ ] Custom Hooks
  - [ ] src/hooks/useScreening.ts (with React Query)
    - [ ] Debounced filter changes (500ms)
    - [ ] Automatic refetch on filter change
    - [ ] Cache screening results (5 min)
- [ ] Filter Panel Component
  - [ ] src/components/screener/FilterPanel.tsx
    - [ ] Market filter (KOSPI/KOSDAQ/ALL)
    - [ ] Sector filter (dropdown)
    - [ ] Indicator filters (collapsible sections)
      - [ ] Valuation (PER, PBR, PSR, dividend yield)
      - [ ] Profitability (ROE, ROA, margins)
      - [ ] Growth (revenue/profit growth)
      - [ ] Stability (debt ratios, current ratio)
      - [ ] Scores (quality, value, growth)
    - [ ] Range inputs (min/max)
    - [ ] Clear filters button
    - [ ] Save screen button (authenticated users)
- [ ] Filter Input Components
  - [ ] src/components/screener/RangeFilter.tsx
    - [ ] Min input
    - [ ] Max input
    - [ ] Validation (min <= max)
    - [ ] Number formatting
- [ ] Template Selector
  - [ ] src/components/screener/TemplateSelector.tsx
  - [ ] Predefined templates dropdown
    - [ ] Dividend Stocks
    - [ ] Value Stocks
    - [ ] Growth Stocks
    - [ ] Quality Stocks
  - [ ] Apply template button
  - [ ] Show template criteria
- [ ] Results Table Component
  - [ ] src/components/screener/ResultsTable.tsx
  - [ ] Sortable columns (click header to sort)
  - [ ] Display columns:
    - [ ] Stock code, name
    - [ ] Current price, change %
    - [ ] PER, PBR, ROE
    - [ ] Dividend yield
    - [ ] Quality/Value/Growth scores
  - [ ] Row click â†’ Navigate to stock detail page
  - [ ] Add to watchlist button (per row)
  - [ ] Virtual scrolling for large result sets
- [ ] Pagination Component
  - [ ] src/components/common/Pagination.tsx
  - [ ] Page number buttons
  - [ ] Previous/Next buttons
  - [ ] Page size selector (20/50/100)
  - [ ] Total results count
- [ ] Export Feature (Premium users)
  - [ ] Export to CSV button
  - [ ] Export to Excel button
  - [ ] Show tier upgrade message for free users
- [ ] Loading & Empty States
  - [ ] Skeleton loaders during API call
  - [ ] Empty state when no results
  - [ ] Error state with retry button
- [ ] Main Screener Page
  - [ ] src/pages/ScreenerPage.tsx
  - [ ] Two-column layout (filters left, results right)
  - [ ] Responsive (single column on mobile)
  - [ ] Save/restore filter state in URL params

## Acceptance Criteria
- [ ] **Filter Functionality**
  - [ ] Applying filters updates results
  - [ ] Multiple filters work together (AND logic)
  - [ ] Range filters validate (min <= max)
  - [ ] Clear filters resets all inputs
- [ ] **Template Functionality**
  - [ ] Selecting template applies predefined filters
  - [ ] Template criteria are visible to user
  - [ ] Can modify template filters
- [ ] **Results Display**
  - [ ] Results load within 500ms
  - [ ] Sorting columns works correctly
  - [ ] Pagination works (page 1, 2, 3...)
  - [ ] Clicking row navigates to stock detail
- [ ] **Performance**
  - [ ] Filter changes debounced (not every keystroke)
  - [ ] Virtual scrolling handles 1000+ results smoothly
  - [ ] No UI lag during typing
- [ ] **Responsive Design**
  - [ ] Works on mobile (360px width)
  - [ ] Works on tablet
  - [ ] Works on desktop
  - [ ] Touch-friendly on mobile
- [ ] **Error Handling**
  - [ ] API errors show user-friendly message
  - [ ] Retry button works
  - [ ] Network errors handled gracefully
- [ ] **State Persistence**
  - [ ] Filters survive page refresh (URL params)
  - [ ] Back button restores previous filters
- [ ] **Accessibility**
  - [ ] Keyboard navigation works
  - [ ] Screen reader friendly
  - [ ] ARIA labels on interactive elements

## Dependencies
- **Depends on**: FE-001, BE-004
- **Blocks**: User acceptance testing

## References
- **PRD.md**: Section 5.2.2 Stock Screening (Core Feature)
- **SRS.md**: Section 3.1.3 Stock Screening (REQ-SCREEN-001~004)
- **SDS.md**: Section 3.1.2 Component Design Patterns
- **SDS.md**: Section 8.4.2 Virtual Scrolling

## Progress
- **0%** - Not started

## Notes
- **This is the most important frontend feature**
- Use virtual scrolling library (@tanstack/react-virtual)
- Debounce filter changes to reduce API calls
- Consider infinite scroll as alternative to pagination
- Save frequently used filters for quick access
